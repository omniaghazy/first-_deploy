# -*- coding: utf-8 -*-
"""app

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1LYLGahMwRicz9oYNGiFa2HX8KD89yB67
"""

# Commented out IPython magic to ensure Python compatibility.
# %pip install streamlit

import streamlit as st
import pandas as pd
import numpy as np
import joblib

# قراءة الـModel
try:
    loaded_model = joblib.load("AgglomerativeClustering.pkl")
    st.success("Model loaded successfully!")
except FileNotFoundError:
    st.error("Error: The model file 'AgglomerativeClustering.pkl' was not found.")
    st.stop()

st.title("Customer Segmentation Application")
st.write("Enter the customer's spending data to find their segment.")

# قائمة بأسماء الأعمدة اللي الـModel بيشتغل عليها
features_columns = ['Fresh', 'Milk', 'Grocery', 'Frozen', 'Detergents_Paper', 'Delicassen']

# استقبال المدخلات من المستخدم لكل عمود
input_values = {}
for col in features_columns:
    input_values[col] = st.slider(f"Enter spending on {col}", min_value=0, max_value=100000, value=5000)

if st.button("Predict Customer Segment"):
    # تجهيز البيانات كـDataFrame
    input_data = pd.DataFrame([input_values])

    # استخدام الموديل لعمل Prediction
    # بما إن الـModel بتاعك Agglomerative Clustering فبنستخدم fit_predict
    # لو كان Model تاني زي K-Means كنا ممكن نستخدم predict
    prediction = loaded_model.fit_predict(input_data)

    # عرض النتيجة
    st.header("Prediction Result")
    st.success(f"This customer belongs to Cluster: **{prediction[0]}**")

